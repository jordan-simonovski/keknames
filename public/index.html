<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KEKNAMES</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div id="connection-banner" class="connection-banner"></div>
  <div id="app">
    <!-- LANDING SCREEN -->
    <div id="screen-landing" class="screen active">
      <div class="landing-container">
        <h1 class="logo">KEKNAMES</h1>
        <p class="tagline">codenames but unhinged</p>
        <div class="landing-form">
          <input type="text" id="player-name" placeholder="Your name" maxlength="20" autocomplete="off">
          <div class="landing-buttons">
            <button id="btn-create" class="btn btn-primary">Create Room</button>
            <div class="join-row">
              <input type="text" id="room-code-input" placeholder="ROOM CODE" maxlength="4" autocomplete="off">
              <button id="btn-join" class="btn btn-secondary">Join</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- LOBBY SCREEN -->
    <div id="screen-lobby" class="screen">
      <div class="lobby-container">
        <div class="lobby-header">
          <h2>Room: <span id="lobby-code"></span></h2>
          <div id="host-controls" class="host-controls" style="display:none">
            <div class="mode-toggle">
              <button id="mode-words" class="btn btn-mode active">Words</button>
              <button id="mode-pictures" class="btn btn-mode">Pictures</button>
            </div>
            <div id="wordlist-section">
              <details>
                <summary>Custom Word List</summary>
                <textarea id="custom-words" rows="6" placeholder="Paste words, one per line (min 25). Leave empty for default observability theme."></textarea>
                <button id="btn-set-words" class="btn btn-small">Apply Word List</button>
                <span id="wordlist-status-text"></span>
              </details>
            </div>
          </div>
        </div>

        <div class="teams-container">
          <div class="team-panel team-red">
            <h3>Red Team</h3>
            <div id="team-red-list" class="player-list"></div>
          </div>
          <div class="team-panel team-unassigned">
            <h3>Unassigned</h3>
            <div id="team-none-list" class="player-list"></div>
          </div>
          <div class="team-panel team-blue">
            <h3>Blue Team</h3>
            <div id="team-blue-list" class="player-list"></div>
          </div>
        </div>

        <div id="lobby-actions">
          <button id="btn-start" class="btn btn-primary" style="display:none">Start Game</button>
        </div>
        <div id="lobby-error" class="error-msg"></div>
      </div>
    </div>

    <!-- GAME SCREEN -->
    <div id="screen-game" class="screen">
      <div class="game-header">
        <div class="score-panel">
          <span class="score red-score"><span id="red-remaining">0</span> red</span>
          <span class="turn-indicator" id="turn-indicator"></span>
          <span class="score blue-score"><span id="blue-remaining">0</span> blue</span>
        </div>
        <div class="clue-display" id="clue-display" style="display:none">
          Clue: <strong id="clue-word"></strong> <span id="clue-count"></span>
          (<span id="guesses-remaining"></span> guesses left)
        </div>
      </div>

      <div class="board-wrapper">
        <canvas id="game-board"></canvas>
      </div>

      <div class="game-controls">
        <div id="spymaster-controls" style="display:none">
          <input type="text" id="clue-input" placeholder="One-word clue" maxlength="30" autocomplete="off">
          <input type="number" id="clue-number" min="0" max="25" value="1">
          <button id="btn-give-clue" class="btn btn-primary">Give Clue</button>
        </div>
        <div id="operative-controls" style="display:none">
          <button id="btn-end-turn" class="btn btn-secondary">End Turn</button>
        </div>
      </div>

      <div id="game-over-overlay" class="overlay" style="display:none">
        <div class="overlay-content">
          <h2 id="winner-text"></h2>
          <button id="btn-play-again" class="btn btn-primary" style="display:none">Play Again</button>
          <button id="btn-back-lobby" class="btn btn-secondary">Back to Lobby</button>
        </div>
      </div>

      <div id="game-error" class="error-msg"></div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/assets.js"></script>
  <script src="/js/board.js"></script>
  <script src="/js/lobby.js"></script>
  <script src="/js/game.js"></script>
  <script src="/js/main.js"></script>
</body>
</html>
